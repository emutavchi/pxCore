var isDuk="undefined"!=typeof Duktape,RPCContext=require("rcvrcore/rpcContext");function Scene(){function a(a){return null===g?null:g.hasOwnProperty(a.t)&&"function"==typeof g[a.t]?new g[a.t](a):null}function b(a){for(var b=null,c=0,e=0;e<d.length;++e){var f=d[e],g=f[0],h=f[1],i=!0,j=0;for(var k in g)if(!a.hasOwnProperty(k)||g[k]!==a[k]){i=!1;break}else++j;i&&j>c&&(b=h)}if(null!==b)for(var l in b)a.hasOwnProperty(l)||(a[l]=b[l])}var c=null,d=[],e=new RPCContext(this),f={},g=null;return this._setNativeScene=function(a,b){null===c&&(c=a,this.animation=a.animation,this.stretch=a.stretch,this.maskOp=a.maskOp,this.alignVertical=a.alignVertical,this.alignHorizontal=a.alignHorizontal,this.truncation=a.truncation,this.root=a.root,this.info=a.info,this.capabilities=a.capabilities,this.filePath=b,this.addServiceProvider=a.addServiceProvider,this.removeServiceProvider=a.removeServiceProvider,isDuk?(this.w=a.w,this.h=a.h,this.showOutlines=!1,this.showDirtyRect=!1):(this.__defineGetter__("w",function(){return a.w}),this.__defineGetter__("h",function(){return a.h}),this.__defineGetter__("showOutlines",function(){return a.showOutlines}),this.__defineSetter__("showOutlines",function(b){a.showOutlines=b}),this.__defineGetter__("enableDirtyRect",function(){return a.enableDirtyRect}),this.__defineSetter__("enableDirtyRect",function(b){a.enableDirtyRect=b}),this.__defineGetter__("showDirtyRect",function(){return a.showDirtyRect}),this.__defineSetter__("showDirtyRect",function(b){a.showDirtyRect=b}),this.__defineSetter__("customAnimator",function(b){a.customAnimator=b})))},this._setRPCController=function(a){e._setRPCController(a)},this.getRPCContext=function a(){return e},this.logDebugMetrics=function(){return c.logDebugMetrics()},this.textureMemoryUsage=function(){return c.textureMemoryUsage()},this.collectGarbage=function(){return c.collectGarbage()},this.suspend=function(){return c.suspend({})},this.resume=function(){return c.resume({})},this.loadArchive=function(a){return c.loadArchive(a)},this.customAnimator=function(a){return c.customAnimator(a)},this.getX=function(){return c.x},this.getY=function(){return c.y},this.getWidth=function(){return c.w},this.getHeight=function(){return c.h},this.create=function d(e){function f(a){clr=""+a+"";var b=0;return clr.match(/#([0-9a-f]{6})/i)?(clr=clr.replace(/#([0-9a-f]{6})/i,"0x$1FF"),b=parseInt(clr,16)):clr.match(/#([0-9a-f]{1})([0-9a-f]{1})([0-9a-f]{1})/i)?(clr=clr.replace(/#([0-9a-f]{1})([0-9a-f]{1})([0-9a-f]{1})/i,"0x$1$1$2$2$3$3FF"),b=parseInt(clr,16)):b=a,b}b.call(this,e),e.hasOwnProperty("textColor")&&(e.textColor=f(e.textColor)),e.hasOwnProperty("lineColor")&&(e.lineColor=f(e.lineColor)),e.hasOwnProperty("fillColor")&&(e.fillColor=f(e.fillColor));var h=null;return null!==g&&e.hasOwnProperty("t")&&(h=a(e)),null===h?c.create(e):h},this.stopPropagation=function(){return c.stopPropagation()},this.getFocus=function(a){return c.getFocus(a)},this.on=function(a,b){return c.on(a,b)},this.defineStyle=function(a,b){var c=[a,b];d.push([a,b])},this.clock=function a(){return c.clock()},this.screenshot=function a(b,d){return c.screenshot(b,d)},this.clipboardGet=function a(b){return c.clipboardGet(b)},this.clipboardSet=function a(b,d){return c.clipboardSet(b,d)},this.getService=function a(b,d){return c.getService(b,d)},this.getAvailableApplications=function a(b){return c.getAvailableApplications(b)},this.setAppContext=function(a,b){return!f.hasOwnProperty(a)&&(f[a]=b,!0)},this.getAppContext=function(a){return f[a]},this.addComponentDefinitions=function(a){g=a},this.close=function(){e._setRPCController(null),e=null},this}module.exports=Scene;