var isDuk="undefined"!=typeof Duktape,RPCContext=require("rcvrcore/rpcContext");function Scene(){function a(a){return null===g?null:g.hasOwnProperty(a.t)&&"function"==typeof g[a.t]?new g[a.t](a):null}function b(a){for(var b=null,c=0;c<d.length;++c){var e=d[c],f=e[0],g=e[1],h=!0,i=0;for(var j in f)if(!a.hasOwnProperty(j)||f[j]!==a[j]){h=!1;break}else++i;h&&i>0&&(b=g)}if(null!==b)for(var k in b)a.hasOwnProperty(k)||(a[k]=b[k])}var c=null,d=[],e=new RPCContext(this),f={},g=null;return this._setNativeScene=function(a,b){null===c&&(c=a,this.animation=a.animation,this.stretch=a.stretch,this.maskOp=a.maskOp,this.alignVertical=a.alignVertical,this.alignHorizontal=a.alignHorizontal,this.truncation=a.truncation,this.root=a.root,this.info=a.info,this.capabilities=a.capabilities,this.filePath=b,this.addServiceProvider=a.addServiceProvider,this.removeServiceProvider=a.removeServiceProvider,isDuk?(this.w=a.w,this.h=a.h,this.showOutlines=!1,this.showDirtyRect=!1):(this.__defineGetter__("w",function(){return a.w}),this.__defineGetter__("h",function(){return a.h}),this.__defineGetter__("showOutlines",function(){return a.showOutlines}),this.__defineSetter__("showOutlines",function(b){a.showOutlines=b}),this.__defineGetter__("enableDirtyRect",function(){return a.enableDirtyRect}),this.__defineSetter__("enableDirtyRect",function(b){a.enableDirtyRect=b}),this.__defineGetter__("showDirtyRect",function(){return a.showDirtyRect}),this.__defineSetter__("showDirtyRect",function(b){a.showDirtyRect=b}),this.__defineSetter__("customAnimator",function(b){a.customAnimator=b}),this.__defineGetter__("dirtyRectangle",function(){return a.dirtyRectangle}),this.__defineGetter__("dirtyRectanglesEnabled",function(){return a.dirtyRectanglesEnabled})))},this._setRPCController=function(a){e._setRPCController(a)},this.getRPCContext=function(){return e},this.logDebugMetrics=function(){return c.logDebugMetrics()},this.textureMemoryUsage=function(){return c.textureMemoryUsage()},this.collectGarbage=function(){return c.collectGarbage()},this.suspend=function(){return c.suspend({})},this.resume=function(){return c.resume({})},this.loadArchive=function(a){return c.loadArchive(a)},this.customAnimator=function(a){return c.customAnimator(a)},this.getX=function(){return c.x},this.getY=function(){return c.y},this.getWidth=function(){return c.w},this.getHeight=function(){return c.h},this.create=function(d){b.call(this,d);var e=null;return null!==g&&d.hasOwnProperty("t")&&(e=a(d)),null===e?c.create(d):e},this.stopPropagation=function(){return c.stopPropagation()},this.getFocus=function(a){return c.getFocus(a)},this.on=function(a,b){return c.on(a,b)},this.defineStyle=function(a,b){d.push([a,b])},this.clock=function(){return c.clock()},this.screenshot=function(a,b){return c.screenshot(a,b)},this.clipboardGet=function(a){return c.clipboardGet(a)},this.clipboardSet=function(a,b){return c.clipboardSet(a,b)},this.getService=function(a,b){return c.getService(a,b)},this.getAvailableApplications=function(a){return c.getAvailableApplications(a)},this.setAppContext=function(a,b){return!f.hasOwnProperty(a)&&(f[a]=b,!0)},this.getAppContext=function(a){return f[a]},this.addComponentDefinitions=function(a){g=a},this.close=function(){e._setRPCController(null),e=null},this}module.exports=Scene;