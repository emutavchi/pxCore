'use strict';const QueryString=exports;function ParsedQueryString(){}ParsedQueryString.prototype=Object.create(null);function qsUnescape(a){return print(a),decodeURIComponent(a)}QueryString.unescape=qsUnescape;for(var hexTable=Array(256),i=0;256>i;++i)hexTable[i]="%"+((16>i?"0":"")+i.toString(16)).toUpperCase();QueryString.escape=function(a){"string"!=typeof a&&("object"==typeof a?a=a+"":a+="");for(var b,d="",e=0,f=0;f<a.length;++f)if(b=a.charCodeAt(f),!(33===b||45===b||46===b||95===b||126===b||39<=b&&42>=b||48<=b&&57>=b||65<=b&&90>=b||97<=b&&122>=b)){if(0<f-e&&(d+=a.slice(e,f)),128>b){e=f+1,d+=hexTable[b];continue}if(2048>b){e=f+1,d+=hexTable[192|b>>6]+hexTable[128|63&b];continue}if(55296>b||57344<=b){e=f+1,d+=hexTable[224|b>>12]+hexTable[128|63&b>>6]+hexTable[128|63&b];continue}++f;var g;if(f<a.length)g=1023&a.charCodeAt(f);else throw new URIError("URI malformed");e=f+1,b=65536+((1023&b)<<10|g),d+=hexTable[240|b>>18]+hexTable[128|63&b>>12]+hexTable[128|63&b>>6]+hexTable[128|63&b]}return 0===e?a:e<a.length?d+a.slice(e):d};var stringifyPrimitive=function(a){return"string"==typeof a?a:"number"==typeof a&&isFinite(a)?""+a:"boolean"==typeof a?a?"true":"false":""};QueryString.stringify=QueryString.encode=function(a,b,c,d){b=b||"&",c=c||"=";var e=QueryString.escape;if(d&&"function"==typeof d.encodeURIComponent&&(e=d.encodeURIComponent),null!==a&&"object"==typeof a){for(var f=Object.keys(a),g=f.length,h=g-1,l="",m=0;m<g;++m){var n=f[m],k=a[n],o=e(stringifyPrimitive(n))+c;if(Array.isArray(k)){for(var p=k.length,q=0;q<p;++q)l+=o+e(stringifyPrimitive(k[q])),q<p-1&&(l+=b);p&&m<h&&(l+=b)}else l+=o+e(stringifyPrimitive(k)),m<h&&(l+=b)}return l}return""},QueryString.parse=QueryString.decode=function(a,b,c,d){b=b||"&",c=c||"=";const e=new ParsedQueryString;if("string"!=typeof a||0===a.length)return e;"string"!=typeof b&&(b+="");const f=c.length,g=b.length;var h=1e3;d&&"number"==typeof d.maxKeys&&(h=d.maxKeys);var j=1/0;0<h&&(j=h);var k=QueryString.unescape;d&&"function"==typeof d.decodeURIComponent&&(k=d.decodeURIComponent);const l=k!==qsUnescape,m=[];for(var n=0,o=0,p=0,q="",r="",s=l,t=l,u=0,v=0;v<a.length;++v){const d=a.charCodeAt(v);if(d===b.charCodeAt(o)){if(++o===g){const b=v-o+1;if(p<f?n<b&&(q+=a.slice(n,b)):n<b&&(r+=a.slice(n,b)),s&&(q=decodeStr(q,k)),t&&(r=decodeStr(r,k)),-1===m.indexOf(q))e[q]=r,m[m.length]=q;else{const a=e[q];a instanceof Array?a[a.length]=r:e[q]=[a,r]}if(0==--j)break;s=t=l,u=0,q=r="",n=v+1,o=p=0}continue}else o=0,t||(37===d?u=1:0<u&&(48<=d&&57>=d||65<=d&&70>=d||97<=d&&102>=d)?3==++u&&(t=!0):u=0);if(p<f)if(d===c.charCodeAt(p)){if(++p===f){const b=v-p+1;n<b&&(q+=a.slice(n,b)),u=0,n=v+1}continue}else p=0,s||(37===d?u=1:0<u&&(48<=d&&57>=d||65<=d&&70>=d||97<=d&&102>=d)?3==++u&&(s=!0):u=0);43===d&&(p<f?(0<v-n&&(q+=a.slice(n,v)),q+="%20",s=!0):(0<v-n&&(r+=a.slice(n,v)),r+="%20",t=!0),n=v+1)}if(0<j&&(n<a.length||0<p))if(n<a.length&&(p<f?q+=a.slice(n):o<g&&(r+=a.slice(n))),s&&(q=decodeStr(q,k)),t&&(r=decodeStr(r,k)),-1===m.indexOf(q))e[q]=r,m[m.length]=q;else{const a=e[q];a instanceof Array?a[a.length]=r:e[q]=[a,r]}return e};function decodeStr(a,b){try{return b(a)}catch(b){return QueryString.unescape(a,!0)}}