var isDuk="undefined"!=typeof Duktape,isV8="undefined"!=typeof _isV8,isJSC="undefined"!=typeof _isJSC;isDuk?(global.console=require("console"),global.timers=require("timers"),global.Promise=require("bluebird"),global.websocket=require("ws.js"),global.setTimeout=timers.setTimeout,global.clearTimeout=timers.clearTimeout,global.setInterval=timers.setInterval,global.clearInterval=timers.clearInterval,Promise.setScheduler(function(a){var b=uv.new_timer.call({});uv.timer_start(b,0,0,a)}),global.constructPromise=function(a){return new Promise(function(b,c){a.then2(b,c)})}):isV8?(global=global||{},global.console=console=require("console"),global.timers=timers=require("timers"),global.Buffer=Buffer=require("buffer").Buffer,global.setTimeout=setTimeout=timers.setTimeout,global.clearTimeout=clearTimeout=timers.clearTimeout,global.setInterval=setInterval=timers.setInterval,global.clearInterval=clearInterval=timers.clearInterval,global.Promise=Promise=require("bluebird"),global.process=process=require("process"),global.pako=pako=require("pako")):isJSC&&(global={},global.console=console=require("console"),global.Buffer=Buffer=require("buffer").Buffer,global.process=process=require("process"),global.pako=pako=require("pako"));var AppSceneContext=require("rcvrcore/AppSceneContext"),RPCController=require("rcvrcore/rpcController");if(isDuk)global.loadUrl=function loadUrl(a){var b=new AppSceneContext({scene:getScene("scene.1"),makeReady:this.makeReady,getContextID:this.getContextID,packageUrl:a,rpcController:new RPCController});b.loadScene()};else{function loadUrl(a){var b,c=require("url"),d=require("path");if(!0){var e=c.parse(a,!0);b=e.query._ext}else var e=c.parse(a);b||(b=d.extname(e.pathname)),".md"==b||".sd"==b?a=baseViewerUrl+"/mime/viewMarkdown.js?url="+encodeURIComponent(a):".png"==b||".jpg"==b||".svg"==b?a=baseViewerUrl+"/mime/viewImage.js?url="+encodeURIComponent(a):".txt"==b||".text"==b?a=baseViewerUrl+"/mime/viewText.js?url="+encodeURIComponent(a):".js"==b||".jar"==b;var f=new AppSceneContext({scene:getScene("scene.1"),makeReady:this.makeReady,getContextID:this.getContextID,packageUrl:a,rpcController:new RPCController});f.loadScene()}var baseViewerUrl="https://www.pxscene.org"}